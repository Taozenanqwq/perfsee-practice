import"./vendor.e18121a5.js";/* empty css             *//* empty css               *//* empty css              */import{_ as e,r,g as l,x as a,y as t,G as o,o as s,c as i,w as u,a as d,f as n,q as p,m as c,K as m,D as g,H as f,I as b,i as h,h as v,l as _,j as k,L as w,d as y,M as j,N as S,O as F,P as x,E as U,Q as D,R as V,J as C,S as P,T as z}from"./index.d0a06d2f.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                   *//* empty css                *//* empty css                  *//* empty css                 */const I=["src"],R={class:"dialog-footer"};var T=e({__name:"DialogAddSwiper",props:{type:String,reload:Function},setup(e,{expose:y}){const j=e,S=r(null),F=l({uploadImgServer:a,token:t("token")||"",visible:!1,ruleForm:{url:"",link:"",sort:""},rules:{url:[{required:"true",message:"图片不能为空",trigger:["change"]}],sort:[{required:"true",message:"排序不能为空",trigger:["change"]}]},id:""}),x=e=>{const r=e.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(r))return m.error("请上传 jpg、jpeg、png 格式的图片"),!1},U=e=>{F.ruleForm.url=e.data||""},D=()=>{console.log(S.value.validate),S.value.validate((e=>{e&&("add"==j.type?g.post("/carousels",{carouselUrl:F.ruleForm.url,redirectUrl:F.ruleForm.link,carouselRank:F.ruleForm.sort}).then((()=>{m.success("添加成功"),F.visible=!1,j.reload&&j.reload()})):g.put("/carousels",{carouselId:F.id,carouselUrl:F.ruleForm.url,redirectUrl:F.ruleForm.link,carouselRank:F.ruleForm.sort}).then((()=>{m.success("修改成功"),F.visible=!1,j.reload&&j.reload()})))}))};return y({open:e=>{F.visible=!0,e?(F.id=e,(e=>{g.get(`/carousels/${e}`).then((e=>{F.ruleForm={url:e.carouselUrl,link:e.redirectUrl,sort:e.carouselRank}}))})(e)):F.ruleForm={url:"",link:"",sort:""}},close:()=>{F.visible=!1}}),(r,l)=>{const a=o("Plus"),t=f,m=b,g=h,y=v,j=_,V=k,C=w;return s(),i(C,{title:"add"==e.type?"添加轮播图":"修改轮播图",modelValue:F.visible,"onUpdate:modelValue":l[3]||(l[3]=e=>F.visible=e),width:"400px"},{footer:u((()=>[d("span",R,[n(V,{onClick:l[2]||(l[2]=e=>F.visible=!1)},{default:u((()=>[p("取 消")])),_:1}),n(V,{type:"primary",onClick:D},{default:u((()=>[p("确 定")])),_:1})])])),default:u((()=>[n(j,{model:F.ruleForm,rules:F.rules,ref_key:"formRef",ref:S,"label-width":"100px",class:"good-form"},{default:u((()=>[n(g,{label:"图片",prop:"url"},{default:u((()=>[n(m,{class:"avatar-uploader",action:F.uploadImgServer,accept:"jpg,jpeg,png",headers:{token:F.token},"show-file-list":!1,"before-upload":x,"on-success":U},{default:u((()=>[F.ruleForm.url?(s(),c("img",{key:0,style:{width:"200px",height:"100px",border:"1px solid #e9e9e9"},src:F.ruleForm.url,class:"avatar"},null,8,I)):(s(),i(t,{key:1,class:"avatar-uploader-icon"},{default:u((()=>[n(a)])),_:1}))])),_:1},8,["action","headers"])])),_:1}),n(g,{label:"跳转链接",prop:"link"},{default:u((()=>[n(y,{type:"text",modelValue:F.ruleForm.link,"onUpdate:modelValue":l[0]||(l[0]=e=>F.ruleForm.link=e)},null,8,["modelValue"])])),_:1}),n(g,{label:"排序值",prop:"sort"},{default:u((()=>[n(y,{type:"number",modelValue:F.ruleForm.sort,"onUpdate:modelValue":l[1]||(l[1]=e=>F.ruleForm.sort=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}}},[["__scopeId","data-v-6c3e84de"],["__file","D:/1-web/web/6codeDBs/vue3-admin/src/components/DialogAddSwiper.vue"]]);const B={class:"header"},q=["src"],A=["href"];var N=e({__name:"Swiper",setup(e){const a=r(),t=l({loading:!1,tableData:[],currentPage:1,pageSize:10,type:"add",multipleSelection:[],total:0});y((()=>{o()}));const o=()=>{t.loading=!0,g.get("/carousels",{params:{pageNumber:t.currentPage,pageSize:t.pageSize}}).then((e=>{t.tableData=e.list,t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1}))},i=()=>{console.log("addSwiper",a.value),t.type="add",a.value.open()},f=e=>{t.multipleSelection=e},b=()=>{t.multipleSelection.length?g.delete("/carousels",{data:{ids:t.multipleSelection.map((e=>e.carouselId))}}).then((()=>{m.success("删除成功"),o()})):m.error("请选择项")},h=e=>{t.currentPage=e,o()};return(e,r)=>{const l=k,m=j,g=S,v=F,_=x,w=U;return s(),c(D,null,[n(w,{class:"swiper-container"},{header:u((()=>[d("div",B,[n(l,{type:"primary",icon:V(P),onClick:i},{default:u((()=>[p("增加")])),_:1},8,["icon"]),n(m,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:b},{reference:u((()=>[n(l,{type:"danger",icon:V(z)},{default:u((()=>[p("批量删除")])),_:1},8,["icon"])])),_:1})])])),default:u((()=>[n(v,{load:t.loading,ref:"multipleTable",data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:f},{default:u((()=>[n(g,{type:"selection",width:"55"}),n(g,{label:"轮播图",width:"200"},{default:u((e=>[d("img",{style:{width:"150px",height:"150px"},src:e.row.carouselUrl,alt:"轮播图"},null,8,q)])),_:1}),n(g,{label:"跳转链接"},{default:u((e=>[d("a",{target:"_blank",href:e.row.redirectUrl},C(e.row.redirectUrl),9,A)])),_:1}),n(g,{prop:"carouselRank",label:"排序值",width:"120"}),n(g,{prop:"createTime",label:"添加时间",width:"200"})])),_:1},8,["load","data"]),n(_,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:h},null,8,["total","page-size","current-page"])])),_:1}),n(T,{ref_key:"addSwiper",ref:a,reload:o,type:t.type},null,8,["type"])],64)}}},[["__file","D:/1-web/web/6codeDBs/vue3-admin/src/views/Swiper.vue"]]);export{N as default};
